!(function(e, t) {
  if ('function' == typeof define && define.amd)
    define('ellipsed', ['exports'], t);
  else if ('undefined' != typeof exports) t(exports);
  else {
    var n = {};
    t(n), (e.ellipsed = n);
  }
})(this, function(e) {
  'use strict';
  Object.defineProperty(e, '__esModule', { value: !0 });
  var g =
    Object.assign ||
    function(e) {
      for (var t = 1; t < arguments.length; t++) {
        var n = arguments[t];
        for (var o in n)
          Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o]);
      }
      return e;
    };
  function v(e, t) {
    var n = e.el,
      o = e.elStyle,
      r = e.elHeight,
      a = e.rowsLimit,
      i = e.rowsWrapped,
      s = e.options,
      l = e.buffer,
      c = l;
    if (i === a + 1) return g({}, e);
    var p = l,
      d = i,
      u = r;
    return (
      (n.innerHTML = c = l.length
        ? '' + l + s.delimiter + t + s.replaceStr
        : '' + t + s.replaceStr),
      parseFloat(o.height) > parseFloat(r) && (d++, (u = o.height), d === a + 1)
        ? ((n.innerHTML = c =
            '.' === p[p.length - 1] && '...' === s.replaceStr
              ? p + '..'
              : '' + p + s.replaceStr),
          g({}, e, { elHeight: u, rowsWrapped: d }))
        : ((n.innerHTML = c = p.length ? '' + p + s.delimiter + t : '' + t),
          g({}, e, { buffer: c, elHeight: u, rowsWrapped: d }))
    );
  }
  (e.disableResponsive = function(e) {
    window.removeEventListener('resize', e);
  }),
    (e.ellipsis = function t() {
      for (
        var n =
            0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : '',
          o =
            1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 1,
          r =
            2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},
          e = g(
            {},
            {
              replaceStr: '...',
              responsive: !1,
              debounceDelay: 250,
              delimiter: ' ',
            },
            r
          ),
          a = document.querySelectorAll(n),
          i = [],
          s = 0;
        s < a.length;
        s++
      ) {
        var l = a[s];
        i[s] = l.innerHTML;
        var c = l.innerHTML.split(e.delimiter);
        l.innerHTML = '';
        var p = window.getComputedStyle(l);
        c.reduce(v, {
          el: l,
          buffer: l.innerHTML,
          elStyle: p,
          elHeight: 0,
          rowsLimit: o,
          rowsWrapped: 0,
          options: e,
        });
      }
      if (e.responsive) {
        var d = !1,
          u = window.innerWidth,
          f = function() {
            if (window.innerWidth !== u) {
              u = window.innerWidth;
              for (var e = 0; e < a.length; e++) a[e].innerHTML = i[e];
              t(n, o, g({}, r, { responsive: !1 }));
            }
          },
          h = function() {
            clearTimeout(d), (d = setTimeout(f, e.debounceDelay));
          };
        return window.addEventListener('resize', h), h;
      }
    });
}),
  require(['jquery', 'ellipsed'], function(o, e) {
    'use strict';
    var r = e.ellipsis,
      a = [
        { selector: '#breadcrumbs-home a', icon: 'fas fa-home', prepend: !0 },
        {
          selector: '#document-toc .portletHeader',
          icon: 'fas fa-list-ul',
          prepend: !0,
        },
        {
          selector: '#parent-fieldname-text.pat-autotoc .autotoc-nav a',
          icon: 'fas fa-chevron-right',
          prepend: !0,
        },
        {
          selector:
            '.template-album_view .photoAlbumEntry.photoAlbumFolder .photoAlbumEntryTitle',
          icon: 'fas fa-folder-open',
          prepend: !0,
        },
        {
          selector: '.footer-social .fb',
          icon: 'fab fa-facebook-f',
          prepend: !0,
        },
        {
          selector: '.footer-social .ig',
          icon: 'fab fa-instagram',
          prepend: !0,
        },
        { selector: '.footer-social .tw', icon: 'fab fa-twitter', prepend: !0 },
        {
          selector: '.footer-social .tg',
          icon: 'fab fa-telegram',
          prepend: !0,
        },
        { selector: '.footer-social .yt', icon: 'fab fa-youtube', prepend: !0 },
        {
          selector: '.footer-social .in',
          icon: 'fab fa-linkedin-in',
          prepend: !0,
        },
        {
          selector: '.footer-social .gp',
          icon: 'fab fa-google-plus-g',
          prepend: !0,
        },
        {
          selector: '.footer-social .pi',
          icon: 'fab fa-pinterest',
          prepend: !0,
        },
        {
          selector: '.footer-social .po',
          icon: 'fab fa-get-pocket',
          prepend: !0,
        },
        { selector: '.footer-social .rss', icon: 'fas fa-rss', prepend: !0 },
        {
          selector: '.footer-social .flickr',
          icon: 'fab fa-flickr',
          prepend: !0,
        },
        {
          selector:
            '.navigationTile a.navTreeFolderish:not(.navTreeCurrentNode):not(.navTreeItemInPath), .portletNavigationTree a.navTreeFolderish:not(.navTreeCurrentNode):not(.navTreeItemInPath)',
          icon: 'fas fa-angle-down',
          prepend: !1,
        },
        {
          selector:
            '.navigationTile a.navTreeFolderish.navTreeCurrentNode, .navigationTile a.navTreeFolderish.navTreeItemInPath, .portletNavigationTree a.navTreeFolderish.navTreeCurrentNode, .portletNavigationTree a.navTreeFolderish.navTreeItemInPath',
          icon: 'fas fa-angle-up',
          prepend: !1,
        },
        {
          selector: 'button#search-filter-toggle',
          icon: 'fas fa-filter',
          prepend: !0,
        },
        {
          selector: '#sorting-options a[data-sort="Date"]',
          icon: 'far fa-calendar-alt',
          prepend: !0,
        },
        {
          selector: '#sorting-options a[data-sort="sortable_title"]',
          icon: 'fas fa-sort-alpha-down',
          prepend: !0,
        },
        {
          selector:
            '#sorting-options a:not([data-sort="Date"]):not([data-sort="sortable_title"])',
          icon: 'fas fa-star',
          prepend: !0,
        },
        {
          selector: '#categories-filed-under',
          icon: 'fas fa-tags',
          prepend: !0,
        },
        {
          selector:
            '#portal-searchbox input:not(.solr-search) + button.search-button',
          icon: 'fas fa-search',
          prepend: !0,
        },
        {
          selector: '.documentActions #document-action-print a',
          icon: 'fas fa-print',
          prepend: !0,
        },
        {
          selector: 'nav.pagination ul li .arrow',
          icon: 'fas fa-angle-right',
          prepend: !1,
        },
        {
          selector: 'article.vevent a.event_ical',
          icon: 'far fa-calendar',
          prepend: !0,
        },
        {
          selector: '.event.summary.details li.event-calendar a',
          icon: 'far fa-calendar',
          prepend: !0,
        },
      ];
    o(document).ready(function() {
      a.forEach(function(e) {
        var t = o(e.selector);
        0 !== t.length &&
          (e.prepend
            ? t.prepend('<i class="' + e.icon + '"></i>')
            : t.append('<i class="' + e.icon + '"></i>'));
      }),
        o(window).scroll(function() {
          50 <= o(this).scrollTop()
            ? o('#return-to-top').fadeIn(200)
            : o('#return-to-top').fadeOut(200);
        }),
        o('#return-to-top').click(function() {
          o('body,html').animate({ scrollTop: 0 }, 500);
        });
      var t = o('.share');
      function e() {
        r(
          '.tile-collection .collectionItemDescription, .news-highlight .news-description, .news-big-photo .news-description',
          4,
          { responsive: !0 }
        );
      }
      if (
        (o('.news-column').length
          ? (o('.news-column').prepend(t), t.addClass('share-visible'))
          : o('#portal-column-two').length &&
            (o('#portal-column-two').prepend(t), t.addClass('share-visible')),
        o('.share .share-toggle').on('click', function(e) {
          e.preventDefault(), t.toggleClass('open');
        }),
        o('#search-toggle').on('click', function() {
          o('#portal-searchbox').toggleClass('open'),
            o('#search-toggle').toggleClass('open'),
            o('body').toggleClass('searchOpened'),
            o('#portal-searchbox').hasClass('open') &&
              o('#searchGadget').focus();
        }),
        o('button.plone-navbar-toggle').on('click', function() {
          o('#portal-mainnavigation').toggleClass('open');
        }),
        o('#globalnav-close').click(function() {
          o('#portal-mainnavigation').removeClass('open'),
            o('#portal-globalnav-collapse').removeClass('in');
        }),
        o(document).on('click', function(e) {
          !o(e.target).closest('#portal-searchbox').length &&
            !o(e.target).closest('button#search-toggle').length &&
            o(window).width() <= 991 &&
            (o('#portal-searchbox').removeClass('open'),
            o('#search-toggle').removeClass('open'),
            o('body').removeClass('searchOpened')),
            o(e.target).closest('.share').length || t.removeClass('open'),
            !o(e.target).closest('#portal-globalnav-wrapper').length &&
              !o(e.target).closest('button.plone-navbar-toggle').length &&
              o(window).width() <= 991 &&
              o('#portal-mainnavigation #portal-globalnav').length &&
              o('#portal-mainnavigation #portal-globalnav').hasClass(
                'plone-nav'
              ) &&
              o('#portal-mainnavigation').removeClass('open');
        }),
        o('body').hasClass('userrole-anonymous')
          ? e()
          : o('.tiles-management, .pat-tiles-management').on(
              'rtTilesLoaded',
              function() {
                e();
              }
            ),
        o(document).on('patSliderInit', function(e) {
          o(e.originalEvent.detail)
            .find('.slick-dots')
            .attr('aria-hidden', !0);
        }),
        !!!document.documentMode)
      ) {
        var n = new Event('rtIconsLoaded');
        document.dispatchEvent(n);
      }
      o(document).on('click', function(e) {
        0 < o(e.target).closest('.pat-structure').length &&
          (o('#portal-breadcrumbs').load(
            window.location.href.split('folder_contents')[0] +
              ' #portal-breadcrumbs',
            function() {
              o('#portal-breadcrumbs #breadcrumbs-home a').prepend(
                '<i class="fas fa-home"></i>'
              );
            }
          ),
          o('h1.documentFirstHeading').load(
            window.location.href.split('folder_contents')[0] +
              ' h1.documentFirstHeading'
          ));
      });
    });
  }),
  define('js/src/index.js', function() {}),
  requirejs(
    [
      'jquery',
      'https://static.ict.uniba.it/uniba.widgets/rubrica/handlebars.min.js',
    ],
    function(e, l) {
      function r(e) {
        for (
          var t = {},
            n = e.split('/')[e.split('/').length - 1],
            o = (n =
              -1 < n.indexOf('?') ? n.substring(n.indexOf('?') + 1) : '').split(
              '&'
            ),
            r = 0;
          r < o.length;
          r++
        ) {
          var a = o[r].split('=');
          t[a[0]] = a[1] ? a[1] : '';
        }
        return t;
      }
      var c = {
        jsonUrlHost: 'https://persone.ict.uniba.it',
        entityList: { username: { template: '' }, docente: { template: '' } },
        srcPath: 'https://static.ict.uniba.it/uniba.widgets/rubrica/',
        cssSelector: 'external-link',
        rubricaNodes: {},
        init: function() {
          var e = document.querySelectorAll('script');
          Array.prototype.forEach.call(e, function(e) {
            -1 < e.src.indexOf('uniba.rubrica.js') &&
              (c.cssSelector =
                void 0 !== r(e.src).selector
                  ? r(e.src).selector
                  : c.cssSelector);
          }),
            c.interceptSnippets();
          var t = document.createElement('link');
          t.setAttribute('rel', 'stylesheet'),
            t.setAttribute('type', 'text/css'),
            t.setAttribute('href', c.srcPath + 'uniba.rubrica.css'),
            document.getElementsByTagName('head')[0].appendChild(t);
        },
        initHandlebarsLib: function() {
          var e = document.createElement('script');
          e.setAttribute('src', c.srcPath + 'handlebars.min.js'),
            void 0 === l &&
              document.getElementsByTagName('head')[0].appendChild(e);
        },
        templatesHtml: function() {
          for (var e in c.entityList) {
            var t = new XMLHttpRequest();
            t.open('GET', c.srcPath + e + '.hbs.html', !0),
              (t.template = e),
              (t.onload = function() {
                if (200 <= this.status && this.status < 400) {
                  var e = this.template;
                  (c.entityList[e].template = this.responseText),
                    void 0 !== c.rubricaNodes[e] &&
                      Array.prototype.forEach.call(c.rubricaNodes[e], function(
                        e
                      ) {
                        c.callPersone({}, e.dataAttributes, e.el);
                      });
                } else
                  console.log('Failed while connecting to the server : '),
                    console.log(this);
              }),
              (t.onerror = function() {
                console.log('Error: Failed while connecting to the server : '),
                  console.log(this);
              }),
              t.send();
          }
        },
        callbackPersone: function(e, t, n) {
          var o = t.entity,
            r = t.style ? t.style : 'default';
          e.dataAttributes = t;
          var a = l.compile(c.entityList[o].template),
            i = document.createElement('div');
          (i.className = 'rubricauniba_wrapper ' + o + ' ' + r),
            l.registerHelper('formatPhone', function(e, t) {
              return e ? e.split(':')[0] : t.inverse(this);
            });
          var s =
            t.showText && '1' == t.showText ? '<p>' + n.innerHTML + '</p>' : '';
          (i.innerHTML = s + a(e)),
            (i.className = 'rubricauniba ' + i.className);
          try {
            n.parentNode.insertBefore(i, n.nextSibling),
              n.parentNode.removeChild(n);
          } catch (e) {}
        },
        interceptSnippets: function() {
          var e = document.querySelectorAll(
            '.' +
              c.cssSelector +
              '[href^="' +
              c.jsonUrlHost +
              '"][href*="json"]'
          );
          Array.prototype.forEach.call(e, function(e) {
            var t = {},
              n =
                e.getAttribute('href') &&
                -1 < e.getAttribute('href').indexOf(c.jsonUrlHost)
                  ? e.getAttribute('href')
                  : void 0,
              o = null != n ? n.split('/') : void 0;
            ((t = null != n ? r(n) : {}).entity =
              null != n ? 'username' : void 0),
              (t.entity =
                void 0 !== t.template && void 0 !== c.entityList[t.template]
                  ? t.template
                  : t.entity),
              (t.id = null != n ? o[o.length - 1] : void 0),
              (t.url = null != n ? n : void 0),
              null != n &&
                (void 0 === c.rubricaNodes[t.entity] &&
                  (c.rubricaNodes[t.entity] = []),
                (c.rubricaNodes[t.entity] = c.rubricaNodes[t.entity].concat({
                  el: e,
                  dataAttributes: t,
                })));
          }),
            c.templatesHtml();
        },
        callPersone: function(e, t, n) {
          var o = new XMLHttpRequest(),
            r = t.url;
          o.open('GET', r, !0),
            (o.onload = function() {
              200 <= this.status && this.status < 400
                ? '' != this.responseText &&
                  c.callbackPersone(JSON.parse(this.responseText), t, n)
                : console.log('Failed while connecting to the server');
            }),
            (o.onerror = function() {
              console.log('Failed while connecting to the server');
            }),
            o.send();
        },
      };
      e(document).ready(function() {
        c.init();
      });
    }
  );
//# sourceMappingURL=design-plone-theme-bundle-compiled.min.js.map
